此处为语雀视频卡片，点击链接查看：[2025-03-14 16-42-09.mp4](https://www.yuque.com/u1598738/zqco83/pqg7q206gia6culh#luW9n)

## **一、课程目标**

- 了解 JavaScript 中的原型链概念。
- 理解 JavaScript 对象的查找机制。
- 掌握 `__proto__`、`prototype` 及 `Object.prototype` 之间的关系。
- 通过示例代码加深对原型链查找过程的理解。
- 识别原型链在 JavaScript 继承中的作用。

------

## **二、课程内容**

### **1. 什么是原型链？**

- **定义**： JavaScript 中，每个对象都有一个指向其**原型（prototype）的引用（即** `**__proto__**`**）。当访问对象的某个属性或方法时，如果该对象本身没有这个属性或方法，JavaScript 引擎会沿着**原型链向上查找，直到找到该属性或方法，或者到达 `null`（即原型链的顶端）。
- **作用**：

- 允许对象继承其他对象的方法和属性。
- 形成 JavaScript 的继承机制。

------

### **2. 原型链的查找过程**

- **示例代码：**

```javascript
function Animal(name) {
  this.name = name;
}

Animal.prototype.sayHello = function() {
  console.log('Hello from Animal');
};

let dog = new Animal('Buddy');
consle.log(dog);// "Buddy"
console.log(dog.toString()); // [object Object]
console.log(dog.__proto__ === Animal.prototype); // true
console.log(Animal.prototype.__proto__ === Object.prototype); // true
console.log(Object.prototype.__proto__ === null); // true
```



- **查找过程分析：**

1. `dog.toString()` 在 `dog` 对象本身找不到。
2. `dog.__proto__`（即 `Animal.prototype`）上也没有 `toString` 方法。
3. 继续查找 `Animal.prototype.__proto__`（即 `Object.prototype`），这里找到了 `toString` 方法，最终执行 `Object.prototype.toString()`。

![img](https://cdn.nlark.com/yuque/0/2025/png/1931776/1741940229125-b6a4e521-98e5-4cf5-bef4-f31aaa6f13b4.png)

![img](https://cdn.nlark.com/yuque/0/2025/jpeg/1931776/1741940978493-da4780f7-0db4-4ecf-bea0-f49a60af8b6b.jpeg)

**dog ──> Animal.prototype ──> Object.prototype ──> null**

------

------

### **3.** `**__proto__**` **vs** `**prototype**`

| 名称        | 作用                                           |
| ----------- | ---------------------------------------------- |
| `prototype` | 只有函数对象才有，指向其实例对象的原型         |
| `__proto__` | 所有对象都有，指向该对象的原型，即 `prototype` |

**示例：**

```javascript
function Animal() {}
let dog = new Animal();

console.log(dog.__proto__ === Animal.prototype); // true
console.log(Animal.prototype.__proto__ === Object.prototype); // true
console.log(Object.prototype.__proto__ === null); // true
```

------

### **4. 原型链的继承机制**

- **作用**：实现 JavaScript 的对象继承。
- **示例：**

```plain
function Animal(name) {
  this.name = name;
}
Animal.prototype.sayHello = function() {
  console.log('Hello from Animal');
};

function Dog(name, breed) {
  Animal.call(this, name);
  this.breed = breed;
}
Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.constructor = Dog;

let dog = new Dog('Buddy', 'Labrador');
dog.sayHello(); // Hello from Animal
```

------

### **5.** `**Object.create()**` **与原型链**

- **作用**：创建一个新对象，并将其 `__proto__` 设为指定的原型对象。
- **示例：**

```javascript
let animal = {
  speak() {
    console.log("Animal speaks");
  }
};

let dog = Object.create(animal);
dog.speak(); // Animal speaks
```

------

### **6. 原型链的性能问题**

- **属性查找的时间复杂度**：原型链越长，查找属性的时间越长。
- **如何优化**： 

- 避免过深的继承层次。
- 使用 `hasOwnProperty()` 判断对象是否有自己的属性。
- 缓存查找结果，减少重复查找。

------

## **三、总结**

1. **原型链的核心概念**

- JavaScript 对象通过 `__proto__` 形成继承关系。
- 原型链用于对象属性查找。

1. **关键属性**

- `prototype` 只存在于函数上，用于创建实例的原型。
- `__proto__` 存在于所有对象上，指向它的构造函数的 `prototype`。

1. **继承与优化**

- `Object.create()` 可以创建对象并指定原型。
- 过长的原型链可能影响性能，需优化查找逻辑。

------

## **四、课后作业-群聊里面讨论**

1. 解释 `Object.create(null)` 创建的对象和普通对象的区别。
2. 为什么 `Function.prototype.__proto__ === Object.prototype`？
3. **判断输出结果：**

```javascript
function Parent() {}
Parent.prototype.greet = function() {
  console.log("Hello");
};

function Child() {}
Child.prototype = new Parent();
let child = new Child();
child.greet(); // ???
console.log(child.__proto__ === Child.prototype); // ???
console.log(Child.prototype.__proto__ === Parent.prototype); // ???
```