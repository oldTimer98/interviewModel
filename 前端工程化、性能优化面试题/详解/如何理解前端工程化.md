## 是什么

前端工程化是将软件工程相关的方法和思想应用到前端开发中，从而提升前端开发效率、提高产品质量、降低开发难度、减少公司成本的方法和工具。

前端工程化贯穿整个前端项目各个阶段，包括代码规范、流程规范、分支管理、程序开发、前后端联调、自动化测试、应用构建、系统部署和监控、运维等。

![img](https://cdn.nlark.com/yuque/0/2023/png/32786640/1702736531204-7f4656e7-203a-41cf-b6b1-d0173332a90e.png)

## 为什么

随着近些年来前端技术的不断发展，越来越多复杂的业务放在了前端，前端不再是简单的 HTML + CSS + JavaScript 组合。

业务的复杂性导致前端代码量增加，因此前端代码的可靠性、可维护性、可拓展性以及前端应用的性能和开发效率成为重要问题。前端工程化应运而生，旨在解决这些问题。

**前端工程化的优势包括**：

- 提高团队合作效率和降低沟通成本。
- 实现更好的协同，减少开发和测试人员的重复劳动。
- 提高代码质量和可维护性，降低发布的常见问题。



## 怎么做

实施前端工程化的第一步是明确前后端开发的分工，为实现前后端分离打下基础。

**前端主要负责以下内容：**

- 静态资源和动态资源的处理
- JavaScript实现前端业务逻辑
- HTML模板文件的产出
- 中间层Web服务，一般由Node.js实现
- 前端单元测试
- 前端项目部署

其中，静态资源包括 js 文件、css 文件以及各种格式的图片、媒体文件等，这些文件不依赖于服务器，只需要在浏览器里解析；动态资源是指 HTML 的模板，如果项目不是由服务器完成渲染的SPA（单页面）应用，就要考虑如何实现 HTML 模板的渲染。前端项目部署是指静态资源文件在测试服务器上的部署，以及 HTML 模板文件在 Node.js中间层服务器上的部署。

### 规范化

规范化约束对于服务器端开发和前端工程化开发都至关重要。规范化约束可提高团队合作、降低维护成本、有助于代码审查。主要包括**文档规范、工具规范、质量规范、代码规范、UI规范、项目结构规范、git commit规范**等。



### 项目构建

项目构建将前端开发中的所有源代码转化为宿主浏览器可以执行的代码。需要完成编译的内容包括无法被浏览器直接识别的JS代码、无法被浏览器直接识别的CSS代码、无法被浏览器识别的HTML模板代码等。构建工具可实现依赖打包、资源嵌入、文件压缩、加入hash指纹等优化，以提升前端应用性能。



### JavaScript编译

Babel的作用是将浏览器未实现的ECMAScript规范语法转化为可运行的低版本语法。这样，前端工程师可以更自由地使用新的 ECMAScript 规范而不担心兼容性问题。

衍生开来，现如今还出现了许多新的 js 编译工具，如：

- Typescript(老东西)
- swc
- esbuild



### CSS预编译

CSS预编译器提供便捷的语法和特性供开发者编写源代码，然后通过编译工具将源码转化为CSS语法。这样，可以在开发过程中使用更高效、模块化的CSS编程方式。

### 模块化开发

模块化开发解决了命名冲突、依赖管理、性能优化、可维护性和代码复用性等问题。ES6 Module规范逐渐取代了传统的模块化规范，通过构建工具实现ES6 Module规范的编译。

### 组件化开发

组件化开发是从设计层面上对UI进行拆分。将UI拆分为组件，每个组件包含了HTML模板、CSS样式和JS逻辑。通过组件化开发，可以实现代码的复用和模块化，提高代码的可维护性和可扩展性。页面上的每个元素都被看作是一个组件，页面本身也是一个大型组件，由多个中小型组件组成，这种拆分和组装的方式符合前端开发的"分治思想"。

### 开发环境与Mock服务

为了提高开发效率，可以结合本地服务器和构建工具实现前端代码的动态构建。本地服务器可以监听源码的修改，一旦有修改就触发动态构建，省去手动构建的步骤，提高开发效率。此外，Mock服务可以模拟后端接口，辅助前端逻辑编写和功能模块的开发。前端工程师可以先使用Mock数据进行开发，待后端接口开发完成后再切换到真实接口，实现前后端的并行开发。

### 项目部署流程化

项目部署是将前端构建产出的代码包部署到测试服务器的过程。部署流程应该简单、清晰，并且可配置。考虑到团队协作和安全因素，最佳实践是搭建一个可供严格审查、队列控制、操作简化的部署平台，并由专人负责流程进度。

### 前端工程化落地支撑

在实施前端工程化时，可以选择合适的前端语言、框架，例如LESS/SASS/Stylus等的CSS预编译方案，以及AMD/CommonJS/ES6 Module等的JS模块化方案。同时，前端UI框架（如Layui、Bootstrap、Element UI等）和MV*框架（如Vue、React、Angular等）都可以根据项目需求进行选用。

### 优化

在前端开发过程中，优化是一个重要的方面。代码优化包括按需加载、延迟加载、复用代码、避免全局变量、使用事件委托、压缩资源、使用自动补全工具等。非代码优化包括减少HTTP请求次数、使用CDN、使用缓存等措施，都可以提升前端应用的性能和用户体验。

### 前端测试

测试是前端工程化建设中不可或缺的一环。通过单元测试和集成测试，可以及早发现和解决bug，降低开发成本。自动化测试工具可用于单元测试和集成测试，例如Karma + Mocha + Chai等。

### 构建、部署

借助Node和Webpack等工具，可以实现前端代码的自动化构建。自动化构建可以包含代码检查、单元测试、语言编译、依赖分析、打包、压缩、替换等步骤，提高开发效率。自动化部署可以通过Jenkins、Docker等工具实现。

### 性能和错误监控

监控是前端工程化建设的最后一环，通过监控系统可以了解项目在生产环境中的运行情况，开发团队可以根据监控报告对项目进行调整和优化。

## 总结

前端工程化是前端开发的趋势，它可以提高开发效率、降低成本、提高代码质量。然而，在实施前端工程化时需要根据项目实际情况进行定制化选型，合理选择工具和框架。优化和测试是工程化中不可忽视的部分，它们对于提升应用性能和稳定性至关重要。